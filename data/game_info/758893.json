{"id": 758893, "slug": "dokoban-by-copper-france", "name": "Dokoban by Copper France", "name_original": "Dokoban by Copper France", "description": "<p>DOKOBAN</p>\n<p>Dokoban is a sokoban game for the Amstrad CPC. The main character is the doctor or adminis the french gamopat forum.</p>\n<p>Keyboard arrows are used to move the character and pushing the blocks.</p>\n<p>ENTER/RETURN key is used to restart level.</p>\n<p>The game includes 13 levels (size 20x12)</p>\n\n<p>TECHNICAL PART</p>\n<p>The game works on all Amstrad CPC (using only BASIC 1.0)</p>\n<p>1) Control Characters</p>\n<p>The game use a lot of Control characters to replace MODE, PAPER, BORDER, INK, SYMBOL in only one PRINT in the first line :</p>\n<p>MODE is CHR$(4)+\"1\" FOR MODE 1</p>\n<p>PAPER is CHR$(14)+\"0\" FOR PAPER 0</p>\n<p>BORDER is CHR$(29)+CHR$(64+0)+CHR$(64+0) for BORDER 0,0</p>\n<p>INK is CHR$(18)+CHR$(64+v)+CHR$(64+v) for INK v,v</p>\n<p>SYMBOL is CHR$(25)+CHR$(i)+CHR$(a)+CHR$(b)+CHR$(c)+CHR$(d)+CHR$(e)+CHR$(f)+CHR$(g)+CHR$(h) for SYMBOL i,a,b,c,d,e,f,g,h</p>\n<p>PEN and transparent mode are also used in the tiles's strings :</p>\n<p>PEN is CHR$(15)+CHR$(p) FOR PEN p</p>\n<p>Transparent mode is enabled by CHR$(22)+CHR$(1) and disabled by CHR$(22)+CHR$(0)</p>\n<p>2) CALL &amp;BD1C</p>\n<p>The BASIC use MODE 1 but a CALL &amp;BD1C is doing a MODE 0 without clearing the screen. With this trick you can have 8x16x4 colors tiles with a simple PRINT.</p>\n<p>For example for the brick :</p>\n<p>I use PAPER 0 and PEN 1 for it so I have the colors :</p>\n<p>0 (00b) is PEN 0 (Black)</p>\n<p>1 (01b) is PEN 4 (Red),</p>\n<p>2 (10b) is PEN 1 (Bright Red)</p>\n<p>3 (11b) is PEN 5 (Yellow)</p>\n<p>The brick look like : (See Brick.png)</p>\n<p>3220</p>\n<p>2210</p>\n<p>2110</p>\n<p>0000</p>\n<p>2032</p>\n<p>1022</p>\n<p>1021</p>\n<p>0000</p>\n\n<p>I need to translate it for SYMBOL :</p>\r\n\r\n+-+------------------Pixel 1\r\n| |\r\n|+-+-----------------Pixel 2\r\n||||\r\n||||+-+--------------Pixel 3\r\n||||| |\r\n|||||+-+-------------Pixel 4\r\n||||||||\r\n11101000 = 232\r\n11000010 = 194\r\n10010010 = 146\r\n00000000 = 0 \r\n10001110 = 142\r\n00101100 = 44\r\n00101001 = 41\r\n00000000 = 0\r\n<p>The character 240 is printed 4 times for a brick with :</p>\n<p>CHR$(240)+CHR$(240)+CHR$(8)+CHR$(8)+CHR$(10)+CHR$(240)+CHR$(240) (CHR$(8) move cursor to the left and CHR$(10) move it down and i also store the PEN / PAPER to do all in one PRINT)</p>\n<p>3) Levels encoding</p>\n<p>All Levels are 20 by 12</p>\n<p>There is 3 byte per row to define walls and free part of the level :</p>\n<p>Here is an example for the first level :</p>\r\n\r\n            11111111\r\n x012345678901234567x\r\ny     ###            |0000011 1000000 0000000\r\n0    ## ##           |0000110 1100000 0000000\r\n1    #   #           |0000100 0100000 0000000\r\n2    #$  #           |0000100 0100000 0000000\r\n3  ###  $##          |0011100 0110000 0000000\r\n4  #  $ $ #          |0010000 0010000 0000000\r\n5### # ## ########## |1110101 1011111 1111100\r\n6#   # ## ## ##  ..# |1000101 1011011 0000100\r\n7# $  $          ..# |1000000 0000000 0000100\r\n8##### ### #@##  ..# |1111101 1101011 0000100\r\n9    #     ######### |0000100 0001111 1111100\r\ny    #######         |0000111 1111000 0000000\r\n<p>Then you need a byte for the initial position of the character and for each blocks and goal.</p>\n<p>Each position (x,y) is stored in one byte with y * 18 + x with x between 0 and 17 and y between 0 and 9 because first/last row/column are not usable and then max is 9 * 18 + 17 = 179</p>\n<p>So you need 37 + <block count=\"\"> * 2 bytes for a level</block></p>\n<p>All tiles and levels are stored in strings using all the range 0-255. Storing character 0 need to use CHR$(0) because you can't store it directly. CHR$(34) (\") can't be stored but i don't have it (for levels I use range 36- to avoid it)</p>\n<p>Cheating :</p>\n<p>If you want to go to the next level you can do ESC ESC then GOTO 9</p>", "metacritic": null, "released": "2022-03-24", "tba": false, "updated": "2022-03-25T07:12:04", "background_image": "https://media.rawg.io/media/screenshots/de7/de762e4c6cda1cbf52dc4b1c6b6bd367.jpg", "website": "", "rating": 0.0, "rating_top": 0, "added_by_status": null, "playtime": 0, "achievements_count": 0, "ratings_count": 0, "suggestions_count": 18, "game_series_count": 0, "reviews_count": 0, "platforms": ["PC"], "developers": ["BASIC 10Liner"], "genres": ["Puzzle"], "publishers": [], "esrb_rating": null}