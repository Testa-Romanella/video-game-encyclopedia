{"id": 863501, "slug": "bits-at-night", "name": "BITS at Night", "name_original": "BITS at Night", "description": "<p><title>BITS at Night\u2708</title><br/></p>\r\n&lt;header&gt;BITS at Night\u2708Prelude&lt;/header&gt;\r\n&lt;nav id=\"e1d470cc-3f77-494c-9470-a909fbdd151a\" class=\"block-color-gray table_of_contents\"&gt;Horror - Top Down Game?Dev flow1. Basic topdown movement systemRandom cheap map with walls and a playerCollision Control SytemCameraResult2.Menu to enter gameResult3. Updating Coordinates on NodeSetting Up node js serverSetting up GMS2Ask server to create a playerUpdating player infoSending updates to the serverResult - Server Updating this4. Make other players appear and disappearSending position updates from nodeReceiving the updates on GMSBug report :Result5. Lighting SystemJobo Lighting SystemGMS Official Simple Tutorial Lighting SystemResult of Lighting and multiplayer6. Guns ConceptGenerating a BulletEvent to send this to server. Server Handling this (Part 1 - telling other players someone got shot)How GMS makes it look like a player shot a bullet7. Authoritative BulletsshootBullet FunctionUsing this to kill the player who got shotResults8. HealthAdding Health EffectsCool progressive Result After Adding Healthbars, Blinkness9. GhostsDifferences in Ghosts and Normal PlayersAdding a body attributeAdding LogicTurning P into G after deathChanges to oPlayer, oEnemyGhosts are like air, they cant be shotGhosts SpriteFinal Result After Ghosts Integration\ud83d\udc9c\ud83d\udc9c9. Killing GhostsThe Math of it\u2026Making the Function in jsghostHealthReducer FunctionResult\u202610. Ghosts Attacking PlayersGhost Scare Check FunctionThe Jumpscare from NodeHandling the Jumpscare in GMS2Result11. Jumpscares and Freaky MusicFreaky Theme MusicTransition to Jumpscares MusicReal Jumpscare Music and JumpscareAdding Gunshot sounds12. BITS Map and Walls ConfigWall Placement13. Random Spawn System , StreetlightsSpawn System in Node.jsRespawn ghosts !!! Very impCute streetlightsStreetlight Placement14. Major UI fixesKill CountAdding to KillsDone with testing, it works \ud83d\ude42Ghosts and Players countDeath UI saying you died and allMessages UIServer sent messagesHow GMS handles thisResultFullscreen Death AlertIn the ghost health reducer functionHow GMS Handles thisDesigning the Player Stats screen after you have fully died15. Leaderboard and MinimapLeaderboardMinimap16. Hosting and PlayabilityBullets&lt;/nav&gt;<p><strong>20 August</strong></p>PreludeHorror - Top Down Game?<p>Okay so I was thinking of bits at night, a horror multiplayer game based on illumination.</p><ul><li>So firstly its topdown shooter multiplayer kind. Easy to make that part with node.</li></ul><ul><li>For the map I really dont know design so its way out of my league to design that so google earth + some editing can make you a nice map.</li></ul><ul><li>Then we need a lot of darkness but the user can toggle a torch light  and move around a little.</li></ul><ul><li>So there are other players and monsters. The most interesting game mode would be battle royale. For now keep it simple 1 room. Players can kill each other and monsters are bots that attack people.</li></ul>Dev flow<ol><li>Basic top down movement system  </li></ol><ol><li>Menu to Enter game</li></ol><ol><li>Updating coordinates on node (try server authority)</li></ol><ol><li>Make other players appear and disappear.</li></ol><ol><li><strong><em>map with walls - </em></strong><em>can be done later anytime</em></li></ol><ol><li>Illumination and torch and whatnot</li></ol><ol><li>Monsters AI - Randomly spawning and attacking you</li></ol><ol><li>Jumpscares</li></ol><ol><li>Battle royale system (restrictions on joining and alive count)</li></ol><p>\n</p><p>Okay this looks fine. I think I can start. Ill make a desktop folder and repo </p>1. Basic topdown movement systemRandom cheap map with walls and a player<ul><li>Draw some walls and make a circular player object with like a gun or a torch</li></ul><p>Okay important point in coding\u2026.. don\u2019t get suck on anything but the current goal. Thats all that matters.</p><ul><li>I think this is fine.</li></ul><ul><li>So I integrated the Walls collision system but its not exactly fine. The guy is getting stuck in walls. So Im trying to have like a system that brings the player back to where he came from.</li></ul>Collision Control Sytem<ul><li>I have an array of old coordinates values. So whenever a player is wall stuck itll take the player back I guess?</li></ul><ul><li>Or wait, if a wall is close , push the guy away from the wall</li></ul>var move = keyboard_check(ord(\"W\")) - keyboard_check(ord(\"S\"))\r\nspeed = 5*move\r\nif(point_distance(x,y, mouse_x , mouse_y) &gt; 30){\r\n    direction = point_direction(x,y, mouse_x , mouse_y);\r\n    \r\n}\r\nif(position_meeting(x + lengthdir_x(speed , direction),y +  lengthdir_y(speed , direction),oWall)){\r\n    //colliding with a wall - no freedom in image angle , only in direction\r\n    speed =0\r\n    \r\n    \r\n}else{\r\n    //not colliding with a wall\r\n    image_angle = direction;\r\n}\r\n<ul><li>Finally something that works!. It was getting annoying. And I think the most important thing would be camera now</li></ul>Camera<ul><li>This is just boilerplate so I dont think its so important to log about it much</li></ul><ul><li>Just a slow interpolated camera</li></ul><p>I changed up the values and the movement is looking really nice now \ud83d\ude42</p>Result<p>\n</p>https://s3-us-west-2.amazonaws.com/secure.notion-static.com/df4e91ba-e974-4132-8907-01d1e35e71a8/screen_rec.mp42.Menu to enter game<ul><li>I will make a new room. Basic room. Just takes in your name and then sends you to the multiplayer stuff.</li></ul><ul><li>So I added some font and made some buttons and text and a field for your name and all</li></ul>//oMenu Create\r\nglobal.username = \"\";\r\nkeyboard_string=\"\"\r\n//oMenu Draw GUI\r\nvar bh = camera_get_view_height(view_current)\r\nvar bw = camera_get_view_width(view_current)\r\nvar scale = .4*bw/1300;  //if we want to scale up the font\r\nvar mx = device_mouse_x_to_gui(0)\r\nvar my = device_mouse_y_to_gui(0)\r\ndraw_set_color(c_white)\r\ndraw_set_font(fPressStart2P)\r\ndraw_set_halign(fa_center);\r\ndraw_set_valign(fa_center);\r\ndraw_text_transformed(bw*0.5 , bh*0.25 , \"BITS at Night\" , scale, scale ,0 )\r\ndraw_text_transformed(bw*0.5 , bh*0.5 , \"Enter a username\" , 0.5*scale, 0.5*scale ,0 );\r\n//Enter button\r\ndraw_set_color(c_green)\r\ndraw_roundrect(bw*0.4 , bh*(0.65-0.04) , bw*0.6 ,bh*(0.65+0.04) ,false )\r\ndraw_set_color(c_white)\r\ndraw_text_transformed(bw*0.5 , bh*0.66 , \"PLAY\" , scale, scale ,0 )\r\nif(mouse_check_button_pressed(mb_left)){\r\n    \r\n    var c1 = mx &lt; bw*0.6\r\n    var c2 = mx &gt; bw*0.4\r\n    var c3 = my &gt; bh*(0.65-0.04)\r\n    var c4 = my &lt; bh*(0.65+0.04)\r\n    if(c1 and c2 and c3 and c4){\r\n        room_goto(rGame)\r\n    }\r\n}\r\n//Textbox for name\r\ndraw_set_color(c_white)\r\ndraw_roundrect(bw*0.4 , bh*(0.4-0.04) , bw*0.6 ,bh*(0.4+0.04) ,false )\r\ndraw_set_color(c_black)\r\nif( string_length(keyboard_string) &gt; 10){\r\n    keyboard_string =  string_delete(keyboard_string ,10 , 1 )\r\n}\r\ndraw_text_transformed(bw*0.5 , bh*0.4 , keyboard_string , 0.5*scale, 0.5*scale ,0 )\r\n<p>\n</p>Result<ul><li>Ok this is cute</li></ul><p>\n</p>3. Updating Coordinates on NodeSetting Up node js server<ul><li>So in the main repo Im making a folder called server for the node project</li></ul><ul><li>Then the boilerplate websocket server stuff</li></ul>Setting up GMS2<ul><li>Async networking boilerplate</li></ul><p>\n</p><p>Next lets set up the event based communication stuff.</p>Ask server to create a player<ul><li>So in the oMenu after the guy clicks on PLAY I am going to tell the server to \u201ccreate_me\u201d</li></ul><p><strong>//DEAD PLAYERS CAN BE GHOSTS \u2014 ok so my mom cracked a joke on the walls movement bugs and it let me to a very cool mechanic</strong></p><p><strong>Battle royale +  horror : dead players become ghosts and can haunt and kill existing players. Dead ghosts are just spectators.</strong></p><ul><li>So the main part is the players array that holds all the players. So we will have all our player properties here. x , y , name , id and everything. </li></ul><ul><li>Some more properties that we will add later is   torchLight switched on?</li></ul><ul><li>We are also telling the new guy and everyone already existing on the server that here is someone new</li></ul>Updating player info<ul><li>I want to do this using the server so we have good authority but because we have walls I cant trust \u2026</li></ul><ul><li>So basically the client would send the latest coordinates</li></ul><ul><li>I created a global to hold if the torchlight is on or not</li></ul><ul><li>I added an angle and torch attribute here in node player info too</li></ul><p>\n</p>Sending updates to the server<p>\n</p>Result - Server Updating thishttps://s3-us-west-2.amazonaws.com/secure.notion-static.com/35ddc11e-f23e-4ab6-a6cd-fb0fa9f4c4f9/coordinates_updating.mp4<p>So I was running this on chrome it was lame fps. Edge was fine. I guess its something to do with the \u2026Okay I disabled webGL it works fine.</p><p>\n</p>4. Make other players appear and disappearSending position updates from node<p>\n</p><ul><li>I need to tell every player about every player. So I will make a new function for that that repeats every 16 ms or so.</li></ul><ul><li>This function grabs a players info, puts it in a dictionary , and sends that dictionary over to everyone </li></ul>function stateUpdate() {\r\n    for (let i in players) {\r\n        var sendThis = {\r\n            eventName: \"state_update\", //grabbing this player's info\r\n            id: players[i].id,\r\n            x: players[i].x,\r\n            y: players[i].y,\r\n            A: players[i].A,\r\n            T: players[i].T,\r\n        }\r\n        for (let j in players) {\r\n            players[j].socket.send(JSON.stringify(sendThis));  //sending it to every other player\r\n        }\r\n    }\r\n    setTimeout(stateUpdate, 1000 / 30);\r\n}\r\n<p>\n</p>Receiving the updates on GMS<ul><li>Now we need to update these player coordinates and angle to their respective oEnemy instances</li></ul><p>\n</p><p>\n</p>Bug report :<ul><li>When webgl is set to disabled then the fps is good but after 3 oEnemies the game doesnt update their positions</li></ul><ul><li>When webgl is set to required then the fps is low asf but oENemies are getting updated. Here is auto detect</li></ul><ul><li>When webgl is set to auto detect then the fps is bad in chrome but players are updating. In edge however everything is working perfectly. </li></ul><ul><li>Maybe its that hardware acceleration that I switched off in chrome? Lets try switching it on and playing.</li></ul><p>Yes I was right\u2026\u2026 I guess the movement could be more smooth though. Lets amp up the interpolation.</p><ul><li>Nope its worse. I set it to half half and lets increase nodejs state update frequency</li></ul><p><em><strong>Wow, its just so damn smooth</strong></em><strong>. I fixed it. I changed it up from 50ms to 16ms</strong></p>Resulthttps://s3-us-west-2.amazonaws.com/secure.notion-static.com/597ee731-a41b-45b0-94a7-5eaa5b78a5ff/coordinates_updating.mp4<p>The lighting system seems cool\u2026 Ill do that tomorrow. Dont fucking think about it now. Your progress for today was pretty good.</p><p>\n</p><p><strong>23 August</strong></p>5. Lighting System<ul><li>So what I\u2019m going for is dynamic lighting. Now I guess I have to understand surfaces and whatnot for that.</li></ul><ul><li>Okay I followed the tutorial and pretty much understood. We are drawing the lights(non shadow) as a polygon</li></ul><ul><li>Actually lights first then polygon. for shadow</li></ul><p>First the light sprite is drawn in oLigthing. Then the walls</p><p>///see shaun spalding jobo thing</p><p><strong>24 August</strong></p><p>Okay I need to see the shaun spalding jobo video. If my systems dont work I will use that extension.</p><p>Ok so my systems dont work and I\u2019m going to use that extension\ud83d\udc4f\ud83d\udc4f\ud83d\udc4f</p><p>Even this could have worked</p>https://gamemaker.io/en/blog/coffee-break-tutorial-simple-lighting-gmlJobo Lighting System<ul><li>Okay I pretty much understood shaun spaldings tutorial.</li></ul><p><strong>Okay this system is trash on html5 and websockets  primarily use h5 so I cant, fuck it</strong></p><p>\n</p>GMS Official Simple Tutorial Lighting System<ul><li>So I followed that tutorial and it wasnt so bad really. This is the end result and this is just the beginning.</li></ul><ul><li>So in the oLighting object you can make different lights work for different objects and its really cool.</li></ul><p>I can also add streetlights and all</p>Result of Lighting and multiplayerhttps://s3-us-west-2.amazonaws.com/secure.notion-static.com/385b432f-6c1a-401d-8223-fda2ea74bf49/multiplayer_with_lights.mp4<p>\n</p>6. Guns Concept<p>So for the shooting dynamic, itll be part server authority so thats good right? Ill draw some simple  bullet sprite and add some speed</p>Generating a Bullet<p>The result looks a bit like this</p>Event to send this to server. <ul><li>We need to tell the server we shot a bullet. </li></ul><p>\n</p>Server Handling this (Part 1 - telling other players someone got shot)<p>\n</p><p>\n</p>How GMS makes it look like a player shot a bulletcase \"bullet_shot\":\r\n                \r\n                with(oEnemy){\r\n                    if(clientId == real(realData[?\"shooter\"]) ){\r\n                        //creating a bullet\r\n                        var bullet = instance_create_layer(x +lengthdir_x(13 ,direction -85) ,y+lengthdir_y(13 ,direction-85)  ,\"Instances\",oBullet);\r\n                        bullet.speed = 10;\r\n                        bullet.direction = image_angle;\r\n                        bullet.image_angle = bullet.direction;\r\n                        reloading = 20;\r\n    \r\n                        //recoil animation\r\n                        x -= lengthdir_x(10 , direction)\r\n                        y -= lengthdir_y(10 , direction)                        \r\n                    \r\n                    }\r\n                }\r\n            break;\r\n<p>\n</p>7. Authoritative Bullets<p>Right now the bullets dont really do anything. We need code that traces the path of the bullets and checks if it is hitting someone. This also needs to be done by a centralised authority , so the node server.</p>shootBullet Functionfunction shootBullet(shootersId) {\r\n    var frame = 0\r\n    var init_x = 0;\r\n    var init_y = 0;\r\n    var angle = 0;\r\n    for (let i in players) {\r\n        if (players[i].id == shootersId) {\r\n            init_x = players[i].x;\r\n            init_y = players[i].y;\r\n            angle = players[i].A;\r\n        }\r\n    }\r\n    //trace the trajectory of the bullet\r\n    while (frame &lt; 400) {\r\n        var current_x = init_x + Math.sin(3.1415 / 180 * angle);\r\n        var current_y = init_y - Math.sin(3.1415 / 180 * angle);\r\n        //we have the current coordinates of the bullet. Now check if it is colliding with someone\r\n        for (let i in players) {\r\n            var distance = Math.sqrt((current_x - players[i].x) ** 2 + (current_y - players[i].y) ** 2);\r\n            if (distance &lt; 16) {\r\n                if (players[i].id != shootersId) { //make sure friendly fire doesnt exist\r\n                    return players[i].id; //id of the guy who got shot\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return -1; ///-1 means the bullet hasnt hit anyone yet\r\n}\r\n<ul><li>Here we are tracing each step of the bullet in the direction in which it was fired and checking if it is hitting any player</li></ul><ul><li>It returns the id of the player we hit, or -1 if we hit no one</li></ul><ul><li>We do this by using perpendicular distance from the line in which the bullet was shot.</li></ul>Using this to kill the player who got shot<ul><li>By kill I mean destroy websocket.</li></ul><ul><li>So we are basically destroying that player for everyone else.</li></ul><p>oh fuck i forgot to close the while loop in the shootBullet func</p><p>\u2026\u2026also for x its cos not sin\u2026lot of silly errors there.</p>Results<p>Yess the player we shoot is dying! This is extremely cool but I do think we could add a health variable. 1 shot to kill a player seems too lame</p><p>\n</p>8. Health<ul><li>Just like any other property like x , y , angle , now we will also use Health, denoted by H in nodejs</li></ul><ul><li>And when a player is hit by a bullet, I am reducing the health by 30. </li></ul><ul><li>I also drew healthbars for everyone so this is easier to see.</li></ul><p>\n</p><p>\n</p><p><strong>25 August</strong></p>Adding Health Effects<ul><li>So when like you are getting shot adrenaline pumps up and you can see a little more than normal. </li></ul><ul><li>So the lighting is controlled in oLighting, thats where I will make changes</li></ul><ul><li>So darkness always resets itself. Once health changes, let me change darkness to 0.7 or something.</li></ul><ul><li>In the oPlayer Step</li></ul><ul><li>Also the shader blink thing.</li></ul>Cool progressive Result After Adding Healthbars, Blinknesshttps://s3-us-west-2.amazonaws.com/secure.notion-static.com/05d7c5a5-4000-4456-8e2c-0aed0ef789a3/blinky_health.mp4<p>\n</p>9. GhostsDifferences in Ghosts and Normal Players<ol><li>Ghosts can see in the dark</li></ol><ol><li>Ghosts have no healthbar or health concept. They are gone if light falls on them for like 300ms. Maybe they do need health of some sort, but no healthbar shown</li></ol><ol><li>Ghosts can go through walls</li></ol><ol><li>Ghosts can jumpscare players and kill them.</li></ol><p>\n</p>Adding a body attribute<ul><li>Like body of the player. \u201cP\u201d , \u201cG\u201d , \u201cD\u201d </li></ul><ul><li>So player or ghost or dead(like out of the game)</li></ul>Adding LogicTurning P into G after deathChanges to oPlayer, oEnemy<ul><li>As a ghost, dont show healthbar or walls\u2026.</li></ul>Ghosts are like air, they cant be shot<ul><li>Changes to the bullet tracing code. Shoot only if person is a P</li></ul><p>\n</p>Ghosts Sprite<p>This is what I created in aseprite. Yeah I know top views suck for this\u2026.</p><p>\n</p>Final Result After Ghosts Integration\ud83d\udc9c\ud83d\udc9chttps://s3-us-west-2.amazonaws.com/secure.notion-static.com/78fa7c8f-9ab1-4b8c-8158-344cae7ea429/ghosts_integration.mp4<p>\n</p>9. Killing Ghosts<p>So for killing ghosts\u2026.</p><ul><li>Basically if light falls on a ghost for like 1 second the ghost should die.</li></ul><ul><li>For this we can check if the ghost (considered a point) is inside a triangle consisting of the player and some lights</li></ul><p><strong>26 August</strong></p><p>Dont have a lot of time today so by 11 see how much you can do.</p>The Math of it\u2026<ul><li>So firstly lets bring the origin to the player who is catching the ghost</li></ul><ul><li>So theta is the direction of the player.</li></ul><ul><li>P1 and P2 are like the endpoints of the iso triangle I am trying to make. </li></ul><ul><li>So we need to check if a ghost is inside &lt;0,0&gt; , P1 and P2</li></ul><ul><li>Lets make a function that does this for us</li></ul><ul><li>How to find P1 and P2? Lets assume the yellow radius (torch range ) is 80.</li></ul><ul><li>So P1 and P2 are R e^(i theta +/- 40)</li></ul><p>\n</p>Making the Function in js<ul><li>To check if a point is actually in triangle you can do the coordinate geometry thing.  L1, L2 , L3 must be the opposite signs for the ghost point as the point of the triangle opposite to the side</li></ul><ul><li>so I found this algorithm on stackoverflow</li></ul>bool intpoint_inside_trigon(intPoint s, intPoint a, intPoint b, intPoint c)\r\n{\r\n    int as_x = s.x-a.x;\r\n    int as_y = s.y-a.y;\r\n    bool s_ab = (b.x-a.x)*as_y-(b.y-a.y)*as_x &gt; 0;\r\n    if((c.x-a.x)*as_y-(c.y-a.y)*as_x &gt; 0 == s_ab) return false;\r\n    if((c.x-b.x)*(s.y-b.y)-(c.y-b.y)*(s.x-b.x) &gt; 0 != s_ab) return false;\r\n    return true;\r\n}\r\n<ul><li>I made some changes to the function to work in js and uk use arrays for points</li></ul><ul><li>Then I made this function which checks the whole thing for us</li></ul><p>\n</p>ghostHealthReducer Function<ul><li>This function will check all torchlights from P and see if a G is inside. If yes, reduce health by like 30 I guess?</li></ul><ul><li>No reduce by 1 every 16ms. So\u2026..per sec 60 health gone ig? </li></ul>Result\u2026<p>I temporarily still showed the ghost healthbar.</p>https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d4b6ec6c-cb1b-48e5-bf92-546da57ec1ae/ghosts_elimination_by_torchlight.mp410. Ghosts Attacking Players<ul><li>This part is going to be real fun.</li></ul><ul><li>So basically if (a ghost comes up real close to a player) and (the ghost is not under any torchlight), jumpscare and kill the player</li></ul><ul><li>Okay this is much easier to code than I expected, because we only have to follow the 2 conditions stated above\u2026Ill do it tomorrow</li></ul><p><strong>5 September</strong></p><p><strong>Yeah right \u201cIll do it tomorrow\u201d</strong></p>Ghost Scare Check Function<ul><li>So here I am just doing the above things in code</li></ul>The Jumpscare from Node<ul><li>We need to scare this player. So message the GMS client some event like jumpscare</li></ul>Handling the Jumpscare in GMS2<ul><li>For now I will just make some alert like you got jumpscared</li></ul><p>\n</p>Resulthttps://s3-us-west-2.amazonaws.com/secure.notion-static.com/f68d270f-312c-4d74-88de-34945933ccf5/jumpscares.mp4<p>\n</p>11. Jumpscares and Freaky Music<ul><li>Now lets make some realism in the game.</li></ul><ul><li>The player who gets jumpscared needs to really get scared. I mean jumpscare music and everything </li></ul><ul><li>Firstly lets apply some theme music</li></ul><ul><li>I will use oCamera for all audio related things</li></ul>Freaky Theme Music<ul><li>Plays when you are a P , not a G</li></ul><ul><li>The music I got from this website</li></ul>https://www.chosic.com/free-music/horror/Transition to Jumpscares Music<ul><li>So the idea is to have the music play whenever a ghost is nearby</li></ul><ul><li>Kind of a warning to the player because ghosts have a lot of advantages</li></ul>//if you are a P and theres a G very close by transition to jumpscare\r\nif(oPlayer.body == \"P\"){\r\n    var closestGhost = noone;\r\n    var closestGhostDistance = 100000;\r\n    with(oEnemy){\r\n        if(body == \"G\"){\r\n            if( distance_to_object(oPlayer) &lt; closestGhostDistance  )\r\n            {\r\n                closestGhostDistance = distance_to_object(oPlayer) ;\r\n                closestGhost = id;\r\n            }\r\n        }\r\n    }\r\n    var ghostNearby = false;\r\n    if(closestGhost != noone){\r\n        if(point_distance(oPlayer.x , oPlayer.y , closestGhost.x,closestGhost.y) &lt; 100){\r\n            ghostNearby = true;\r\n        }\r\n    \r\n        if(ghostNearby and ! audio_is_playing(TransitionToJumpscare)){\r\n            audio_play_sound(TransitionToJumpscare , 2 , true);\r\n        \r\n        }\r\n          \r\n    }\r\n    if(!ghostNearby) {\r\n        audio_stop_sound(TransitionToJumpscare);\r\n    }\r\n}else{\r\n    audio_stop_sound(TransitionToJumpscare);\r\n}\r\n<p>\n</p>Real Jumpscare Music and Jumpscare<p><strong>20 September</strong></p><ul><li>Okay first lets do the jumpscare music</li></ul><ul><li>I also drew a jumpscare ghost, there is only 1 problem. Its not scary</li></ul>https://www.youtube.com/watch?v=qa8TUwWnEfc<ul><li>Omg this is so much better.</li></ul><ul><li>I like the guys in the comments saying, as a ghost I can relate to this.</li></ul><ul><li>Okay the music is fad but the ghost is just fine\u2026 lets see</li></ul>Adding Gunshot sounds<ul><li>I took the sounds from gatdamn.io and also the code from there. Im just going to say it. That game\u2019s sound system is a masterpiece.</li></ul><ul><li>Its basically sound falloff exponentially</li></ul><p>I should really do the map</p>12. BITS Map and Walls Config<ul><li>We Want Invisible walls and a simple simple map.</li></ul><p><strong>21 September</strong></p><p>I dont want to waste too much time on this. Its graphics bro</p>Wall Placement<p>This part can get really really difficult Let me actually resize the canvas to cut out NAB?\u2026 No its okay. Just see how the wall placement is looking</p><p>After tedius work. Fucking this is the result</p><ul><li>I removed the walls covering the central lawn, it felt too restrictive</li></ul><p><strong>22 September</strong></p><p>Okay we need to head towards production now. You need</p><ol><li>spawnpoints randomply generated by server</li></ol><ol><li>/if you are a ghost and you are killed , you just die! , death screen , youw ere killed by \u2026</li></ol><ol><li>some streetlights</li></ol><ol><li>better jumpscare</li></ol><ol><li>arrow to show closest player</li></ol><ol><li>map edits for clear roads and A mess fixes</li></ol><p>\n</p>13. Random Spawn System , StreetlightsSpawn System in Node.js<ul><li>As of now in node all players spawn at the same point which is </li></ul><ul><li>So I will create an array of spawnable points where the guy can be spawned</li></ul><ul><li>A spawn system that takes the least populated point to put the user to.</li></ul><ul><li>Ngl this was fun. Now put this for the player\u2019s spawn</li></ul><ul><li>To check if this is working, firstly a player will be spawned somewhere and then at the point farthest from the first player.</li></ul><ul><li><em><strong>Did some bug corrections and yesss it does work! One guy got got spoawned in INS and other in malakars , then the next one in DH2 front , so happy</strong></em></li></ul>Respawn ghosts !!! Very imp<ul><li>After a P kills a P , one P becomes a G and can easily be killed.  So we need to send the G to a place where there are less P\u2019s</li></ul><ul><li>This means I will do a slight modification to the function such that ghosts are not included in search</li></ul><ul><li>Also the &lt;x,y&gt; interpolation must be skipped .</li></ul>Cute streetlights<ul><li>So I want like some streetlights scattered across the bits map. This makes it feel a little less dark</li></ul>Streetlight Placement<ul><li>Went into a bug spriral but now its fine</li></ul><p>I Added a flickering effect too</p><p>\n</p>14. Major UI fixes<p>So this would be the next step</p><ol><li>Kill count</li></ol><ol><li>Alive and ghosts counts</li></ol><ol><li>Death UI saying you died I guess\u2026 </li></ol><p><strong>23 September - 2 pomodoro sessions try to finish this stuff</strong></p>Kill Count<ul><li>I actually havent made a kill count. I need to make one</li></ul><ul><li>Everytime a P takes down a G or a P , ++</li></ul><ul><li>Everytime a G scares the fuck out of a P ++</li></ul><ul><li>Making a new attribute K for kills</li></ul><ul><li>Even on GMS side I am using the built in variable score for your kills. For enemies its just a variable called kills</li></ul><p>\n</p>Adding to Kills<p>We have to do this casewise</p><ol><li>P killing a P</li></ol><ol><li>P killing a G</li></ol><ul><li>In the ghost health reducer function as of now what was happening was once a G is dead its ws was being closed.</li></ul><ul><li>I added code to just ++ killers kill count</li></ul><ol><li>G killing a P</li></ol><ul><li>When a ghost scares a P the G must get ++ kill</li></ul>Done with testing, it works \ud83d\ude42<ul><li>By this  point we have a kinda fun to play game </li></ul>Ghosts and Players count<p>This results in</p>Death UI saying you died and all<ol><li>When you are a P and you are knocked out you need to recieve a message \u201cYou were killed by _____\u201d</li></ol><ol><li>When you are a G and you are torched you need the full UI screen showing Game stats and whatnot</li></ol>Messages UI<p>Stuff that shows in read whenever there is an alert</p><ul><li>Let there be a global.messages array in oController</li></ul><ul><li>Whenever there is a message, it lasts 2 seconds and fades away</li></ul><ul><li>1 to 0.5 alpha in 120 frames</li></ul><ul><li>Now all we need to do is push to this array whenever we have a message to show</li></ul><ul><li>we push another arrray [ \u201cMESSAGE\u201d  , 6  ]</li></ul><ul><li>This will show \u201cMESSAGE\u201d in red for 6 seconds</li></ul><ul><li>Its a very neat simple system</li></ul><p><strong>24 September</strong></p>Server sent messages<ul><li>When a P is knocked out, the server needs to tell some message to GMS. Do that</li></ul><ul><li>So a G can scare a P or a P can shoot a P</li></ul><ul><li>In the ghosts scare players function I am adding code for this alert</li></ul><ul><li>So basically line alerts will show the message</li></ul><ul><li>If the P is shot down by another P</li></ul>How GMS handles thisResultFullscreen Death Alert<ul><li>When a user is actually dead and gone, as of now the ws is being closed.</li></ul><ul><li>We need a different system where \u201cdestroy_player\u201d is broadcasted to everyone</li></ul><ul><li>But the player should not be removed from players array yet</li></ul><ul><li>Umm tbh this is hard because it would require making major changes</li></ul><p><strong>Should we have spectator mode or not? I think we should</strong></p><p>So everywhere we need to add something like , if player body == \u201cD\u201d then do this do that</p>In the ghost health reducer functionHow GMS Handles this<ul><li>Thats a simple death cam system</li></ul>Designing the Player Stats screen after you have fully died<ul><li>I am setting an alarm when the player dies so you can see the stats screen pop up later.</li></ul><p>\n</p><p><strong>26 September</strong></p>15. Leaderboard and Minimap<ul><li>You can have a leaderboard if you know who has how many kills</li></ul><ul><li>We have all oEnemy kills in the kills variable</li></ul><ul><li>So we need to graphically display this in the lower left corner. I can take it from gatdamn.io but lets do from scratch, like a coding challenge</li></ul><p><strong>30 September</strong></p><p>How did the last 4d go? I guess I need a bit of an extension.</p><p><strong>What all is left?</strong></p><ol><li><strong>Leaderboard</strong></li></ol><ol><li><strong>Minimap</strong></li></ol><ol><li><strong>Death screen , you were killed by\u2026</strong></li></ol><ol><li><strong>Playtesting</strong></li></ol><p><strong>Now the extras</strong></p><ol><li><strong>Rooms</strong></li></ol>Leaderboard<p>Please copy this from gatdamn.io</p><p>I did. It was a little buggy and I tried to fix it. Keyword is tried.</p>Minimap<p>Same code copied from gatdamn.io</p>16. Hosting and Playability<p>Fuck man , always leave this to the end. I dont mind tho.</p><p>Please please firebase host me</p><p>Yayy tutorial is there .</p><p><strong>3 September</strong></p><p><strong>So much fucking time went in solving effects bugs and leaderboard bugs. I dont even fucking know if its fucking working. I have to make the itchy page fast</strong></p>Bullets<ul><li>We need to tag bullets by who shot them so that we can destroy the bullets at the right collisions</li></ul><p>\n</p><p>\n</p><p>//if you are a ghost and you are killed , you just die! , death screen , you were killed by \u2026</p><p>//better jumpscare</p><p>\n</p>", "metacritic": null, "released": "2022-10-03", "tba": false, "updated": "2022-10-07T21:44:12", "background_image": "https://media.rawg.io/media/screenshots/e4f/e4ff8fae4ff24ddc5f93362e5e1ef7ec.jpg", "website": "", "rating": 0.0, "rating_top": 0, "added_by_status": null, "playtime": 0, "achievements_count": 0, "ratings_count": 0, "suggestions_count": 4, "game_series_count": 0, "reviews_count": 0, "platforms": ["Web"], "developers": ["lilshake"], "genres": ["Shooter"], "publishers": [], "esrb_rating": null}