{"id": 670425, "slug": "free-cell-1k", "name": "free cell 1K", "name_original": "free cell 1K", "description": "<p>A demake of one of my favorite solitaire variants: Free Cell</p>\n<p>Made in just 1022 characters of code, with no pre-drawn sprites!</p>\r\n&gt; RULES / CONTROLS\r\n\r\n<ul>\n<li>click and drag cards around<ul><li>you cannot move stacks of cards; one at a time only!</li></ul></li>\n<li>stack descending cards of alternating colors in the main play area\r\n  <ul><li>any card may be placed in an empty column of the main area</li></ul></li>\n<li>store any card in the four \"free cells\" at the top left</li>\n<li>make a stack of each suit A-&gt;K in the top right to win</li>\n<li>cmd-r to start a new game</li>\n</ul>\n\n<p>The web version drops your cards if you accidentally move your mouse outside the game window; this behavior is less annoying in the downloaded versions.</p>\r\n&gt; ONE AT A TIME?\r\n<p>You can only move one card at a time; if you want to move a stack of cards you have to take it apart and put it back together manually. This is different from \"standard\" solitaire, and it makes Free Cell particularly interesting! It also makes the implementation a bit easier to fit into the tiny code-size constraint ;)</p>\n\r\n&gt; SOME CODE HIGHLIGHTS\r\n<p>Some of the more bizarre tricks I used to squeeze every bit of functionality out of my 1024-character budget:</p>\n<ul><li>set the palette with poke2(-15-\ud83d\ude10,264,2043,4,3843)!</li><li>check if you can drop your held card with i\\12+G+#S&lt;1or 16-i\\8|k+G==16|1+H.k^^32or H.k==i\\12+k|G!</li><li>update card positions with for _ENV in all(S)do x=u+3*x+.5&gt;&gt;2y=v+3*y+.5&gt;&gt;2end!</li><li>dynamically cast shadows with a very particular palette and poke2(63-\ud83d\ude10,244)rectfill(x-1,y-1,x+W,y+Z,4)poke2(61-\ud83d\ude10,-1,-1)!</li><li>draw the 4 suit icons with split(\"\u2665,\u25c6,\u25c6\u20758f..\u00b3a\u1d9c3.,\u25c6\u20758f\u30cb\")[suit_id]!</li><li>auto-move cards to the top right by tracking the minimum stack height with bitshifting! (search for M (and m) to see the relevant code)</li><li>check whether the game is won by taking advantage of the fact that 2^12&lt;\u29d7 and \u29d7&lt;2^13!</li></ul>\r\n&gt; SYMBOL SOUP\r\n<p>Here's the full code; remember to enable puny text mode (cmd-p) before pasting this into your local PICO-8 console!</p>\r\n\r\nA=add\r\nW=12w=13Z=16s={}B={}Q=1T=0M=9q=poke2\r\nfunction F(i)S=s[i]J=i\\W I=i\\8O=1-I U=I*(i-8+J)*14+O*i*Z+2V=O*max(#S*6+22,28)+5end\r\nfor i=0,51do s[i]={m=i\\W}A(B,{x=i,y=400,k=i+i\\w*3},rnd(i+1)+1)end\r\nq(-15-\ud83d\ude10,264,2043,4,3843)D=rectfill::_::L=T%8T+=1K=B[T]N=not btn(5)X=stat(32)-6Y=stat(33)-8C=fillp\r\nif(T&gt;52)q(14-\ud83d\ude10,3)M=T%3\r\nfor i=15,0,-1do\r\nF(i)M|=S.m\r\nC(\u2592)a=5+O*28D(U,a,U+W,a+Z,2)C()for _ENV in all(S)do x=u+3*x+.5&gt;&gt;2y=v+3*y+.5&gt;&gt;2end\r\nG=abs(X-U)\\8+abs(Y-V)\\Z&lt;&lt;6v=S[#S]k=w\r\nif(v)k=v.k\r\nif(2&gt;&gt;k%Z&gt;M+J*2)K=A(B,del(B,v))L=W+k\\Z\r\nif(H and N and(J+G+#S&lt;1or Z-I|k+G==Z|1+H.k^^32or H.k==J+k|G))K=H L=i\r\nif(btnp(5+J+G))H=A(B,del(B,v))end\r\nif(K)del(s[K.h],A(s[L],K))F(L)S.m/=2K.u,K.v,K.h=U,V,L?\"\u2077i6v1d1\"\r\nif(H)H.x,H.y=X,Y\r\nif(N)H=nil\r\nfor r in all(B)do\r\nx=r.x\r\ny=r.y\r\nq(63-\ud83d\ude10,244)D(x-1,y-1,x+W,y+Z,4)q(61-\ud83d\ude10,-1,-1)D(x,y,x+W,y+Z,3)a=r.k%Z+1?(a==10and\"\u00b3f|\u00b3f0 \u00b3b\"or sub(\"a23456789|jqk\",a,a)..\" \u00b3d\")..split(\"\u2665,\u25c6,\u25c6\u20758f..\u00b3a\u1d9c3.,\u25c6\u20758f\u30cb\")[r.k\\Z+1],x+1,y+1,r.k\\32\r\nfor i=0,77do\r\npset(x+W-i%w,y+Z-i\\w,pget(x+i%w,y+i\\w))end\r\nend?\"\u25cf\u20761\u2076c6\",X+2,Y+7,5\r\nif(M&lt;Q/\u29d7)Q=0?\"\u2077ceg4\"\r\ngoto _\r\n\r\n<p>An earlier, more readable, and much longer version of this code can be found here</p>", "metacritic": null, "released": "2021-09-24", "tba": false, "updated": "2021-09-27T07:09:53", "background_image": "https://media.rawg.io/media/screenshots/03a/03a27a3fe1fb61cc0e81eb2cec6ca2c9.jpg", "website": "", "rating": 0.0, "rating_top": 0, "added_by_status": null, "playtime": 0, "achievements_count": 0, "ratings_count": 0, "suggestions_count": 19, "game_series_count": 0, "reviews_count": 0, "platforms": ["PC", "macOS", "Linux", "Web"], "developers": ["pancelor"], "genres": [], "publishers": [], "esrb_rating": null}