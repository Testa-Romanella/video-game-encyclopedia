{"id": 700586, "slug": "shooting-stars-theroboz", "name": "shooting stars (TheRoboz)", "name_original": "shooting stars (TheRoboz)", "description": "<p>My last minute entry for tweettweetjam 7. Move with left-right and shoot with z or x, shoot the stars for score/avoid them or you'll die\u00a0.\u00a0 Based on a simplified version of the axelay barrel scroll. After the deadline was extended i gave it horizontal scrolling, score and sound! in 559 chars</p>\r\n\r\npal({140,1,129,128,132,131,4,15},1)\r\n::_::y,x,q,c=0,64,{},0::z::cls()for l=-1,24do?c,1,1\r\nj=l+2if y%32==0then\r\nf=rnd(4)q[j]=f\\2for i=y,y+56do sset(i,l,(i/8+f*i/l%2)%10)mset(l,i,mid(1,5*(cos(l/15)+cos(i/56)%f%.8),6))end end\r\nh,e=l/4,64s=4-h+l if(l&gt;-1)e,h=s+22-l,l/1.5palt(l,true)\r\nfor i=e,s,-1do\r\nm=(y-64/i)%64i+=48-h*4tline(0,i,127,i,x/64,m)end\r\nk=(200-y*10)%108?\"\u2605\",j*8*q[j],k,10\r\nend\r\nb=btn()a=b&amp;3x+=2*(a\\2-a%2)x%=128g=x\\8if q[g]==1then\r\nif b&gt;15and k&gt;32then?\"\\a\"\r\nc+=1rect(3+x,k,4+x,99)q[g]=-1elseif k\\1==97then goto _\r\nend end?\"\uc6c3\",x,99,8\r\npalt()y-=1/8y%=64flip()goto z\r\n<p>And the pretty version:</p>\r\n\r\n--Shooting Stars by TheroboZ.\r\npal({140,1,129,128,132,131,4,15},1)                     --set screen palette with a nice gradients from blue water to earth tones\r\n::_::                                                   --label for program restart after you die\r\nx=64                                                    --player starting position\r\ny=0                                                     --barrel scroll starting position\r\nq={}                                                    --enemies table\r\nc=0                                                     --reset score\r\n::z::                                                   --label for game loop\r\n  cls()                                                 --clear screen to black\r\n  for l=-1,24 do                                        --l is the layer index to draw the barrel sroll's fake depth effect\r\n    ?c,1,1                                              --print score (put after the \"do\" for characters reduction)\r\n    j=l+2                                               --better index for enemy iteration. It goeas from 1 to 26\r\n    if y%32==0 then                                     --scroller reached half the map lenght so...\r\n      f=rnd(4)                                          --f is a random number &gt;0 and &lt;4\r\n      q[j]=f\\2                                          --set soem enemies active. The value of f\\2 is either 0 or 1. we will only consider the first 16 enemies\r\n      for i=y,y+56 do                                   --this loop will generate the sprites and the not visible half the map\r\n        sset(i,l,(i/8+f*i/l%2)%10)                      --generate the pixels in the spritesheet\r\n        mset(l,i,mid(1,5*(cos(l/15)+cos(i/56)%f%.8),6)) --generate a smoot but random map going up and now between 1 and 6 depth\r\n      end                                               --the math here is that i just tried random combinations until it looked nice\r\n    end\r\n    h=l/4                                               --layer steps height\r\n    e=64                                                --last screenline we will draw for the water layer (which is the largest)\r\n    s=4-h+l                                             --first screenline we will draw\r\n    if(l&gt;-1) e=s+22-l h=l/1.5 palt(l,true)              --if this is not the first layer we reduce the last line and we set some colors to transparent so they are not just square bloocks but kind countoured\r\n    for i=e,s,-1 do                                     --loop for barrel scroll drawing from bottol layer to top, from last to first line, so when we draw transparent stuff we have something underneath\r\n      m=(y-64/i)%64                                     --calculate the projected map line we will draw at this screen line\r\n      i+=48-h*4                                         --add an offset depending on this layer height\r\n      tline(0,i,127,i,x/64,m)                           --use tline to draw at the calculated line and include an x offset for pseudo x scrolling\r\n    end\r\n    k=(200-y*10)%108                                    --k is the y position for an enemy wave\r\n    ?\"\u2605\",j*8*q[j],k,10                                 --draw the active enemies (when their value is 0 they are at the screen's edge, so the first enemy is always there.. bug but no time/chars to do better)\r\n  end\r\n  b=btn()\r\n  a=b&amp;3                                                 --read input state and mask it for x movement\r\n  x+=2*(a\\2-a%2)                                        --update player x positon\r\n  x%=128                                                --and wrap it horizontally\r\n  g=x\\8                                                 --this is the index for the enemy above the player\r\n  if q[g]==1 then                                       --if the'rs an active enemy there...\r\n    if b&gt;15 and k&gt;32 then                               --and the fire button is pressed and the distance is not too far\r\n      ?\"\\a\"                                             --beeeeeep!\r\n      c+=1                                              --add score\r\n      rect(3+x,k,4+x,99)                                --draw lazerrrr\r\n      q[g]=-1                                           --zapp enemy\r\n    elseif k\\1==97 then                                 --but if the enemy reached your y position..\r\n      goto _                                            --you died, jump to game init\r\n    end\r\n  end\r\n  ?\"\uc6c3\",x,99,8                                          --draw hero\r\n  palt()                                                --reset all palette transparency for next frame\r\n  y-=1/8                                                --scroll abackground a bit\r\n  y%=64                                                 --and wrap it around\r\n  flip()                                                --magic!\r\ngoto z                                                  --jump to game loop", "metacritic": null, "released": "2021-11-22", "tba": false, "updated": "2021-11-26T10:52:05", "background_image": "https://media.rawg.io/media/screenshots/0d3/0d301e677ca9ea9483da2bca8c98c288.jpg", "website": "", "rating": 0.0, "rating_top": 0, "added_by_status": null, "playtime": 0, "achievements_count": 0, "ratings_count": 0, "suggestions_count": 28, "game_series_count": 0, "reviews_count": 0, "platforms": ["Web"], "developers": ["TheRoboz"], "genres": [], "publishers": [], "esrb_rating": null}