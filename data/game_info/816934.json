{"id": 816934, "slug": "ulua-paddle-game", "name": "uLua Paddle Game", "name_original": "uLua Paddle Game", "description": "<p>In this project I have developed an API for a basic paddle game to demonstrate the flexibility of the <strong>uLua </strong>API framework as a modding tool.\r\n</p>\n<p><strong>uLua </strong>is a Game API framework for Unity. It aims to streamline the development of a Game API in Lua for your Unity Project.\u00a0\u00a0</p>\n<p><strong>uLua </strong>wraps around MoonSharp and provides an object oriented framework for API development in Lua. It works by setting up an application-wide Lua context and exposing game objects to it. Objects exposed to Lua can then be accessed in Lua scripts to implement game behaviour. In addition, user-defined Lua scripts may be executed at runtime to allow modding of your project.</p>\n<p><strong>uLua </strong>implements the following features:</p>\n<ul><li>Script execution framework which allows Lua scripts to be executed from the Resources folder or an external directory.</li><li>Event handling system which allows you to invoke events in C# and handle them in Lua.</li><li>Base classes which expose your game objects and data structures to Lua in order to develop your Game API.</li><li>Callback function system for your Game API objects.</li></ul>\n\r\nDocumentation\r\n<p>This document is accompanied by source code documentation, which is found on the GitHub pages of the project's repository.</p>\n<p>For any further questions do not hesitate to contact support@antsoftware.co.uk.</p>\n<p>This project is the result of many hours of hard work. Please support me by starring this project on GitHub.</p>\n<p>If you purchased <strong>uLua</strong>, please leave a review on the asset store! Follow my Twitter!</p>\n\r\n Usage Tutorial\r\n<p><em><strong>Note:</strong> It is recommended to read the uLua Usage Tutorial in the full documentation of <strong>uLua </strong>before reading this document.</em></p>\n<p>The basic behaviour and game logic of this game are implemented in Unity Engine. Specifically:</p>\n<ul><li>Controller scripts for <strong>uLua.PaddleGame.Paddle </strong>and <strong>uLua.PaddleGame.Ball</strong> objects.</li><li>Invoking of game events and object callback functions.</li><li>Collision detection logic for all objects.</li></ul>\n<p>However, the Unity scene for this game does not contain a ball, paddle, or bricks. The levels for this game are set up entirely through the Game API in Lua.</p>\n\r\n1. Modding the Game\r\n<p>The Lua script which is executed by default for this game is listed at the end of this section.\r\n    </p>\n<p>You may mod the game by replacing the original script entirely or by  extending it. To do that, you must place your new Lua scripts in the  appropriate external directory. The external directory is set to Unity's  <strong><em>Application.persistentDataPath </em></strong>by default. For more information for different platforms, check the relevant Unity documentation.\r\n    </p>\n<p>For this project, and for Windows specifically, the directory for the scripts would be the following:\r\n    </p>\r\n\r\nC:\\Users\\{User}\\AppData\\LocalLow\\ANT Software\\Paddle Game\\ \r\n<p>In order to replace the original scene script you must create a file named <strong><em>PaddleGame.lua</em></strong> in this directory. I recommend copying the script below to start making small tweaks to familiarize yourself with the game API.\r\n    </p>\n<p>In order to extend the original scene script you may add any lua  scripts in the \"UserScripts\" folder within the external directory.  Again, for Windows that would be the following:\r\n</p>\r\n\r\nC:\\Users\\{User}\\AppData\\LocalLow\\ANT Software\\Paddle Game\\UserScripts\\\r\n\r\n\r\n2. Scripting API\r\n\r\n2.1. Game Objects\r\n<p>The Game API contains the following objects/data structures:</p>\n<ul><li><strong>Game:</strong> Manager object which is used to create and keep track of Balls, Paddles, and Bricks within the level.</li><li><strong>Settings:</strong> Data structure which contains the current level, remaining lives, score, and other game settings.</li><li><strong>LevelText:</strong> UI element to display the current level.</li><li><strong>LivesText:</strong> UI element to display the remaining lives.</li><li><strong>ScoreText:</strong> UI element to display the player score.</li></ul>\n<p>All ball, brick, and paddle objects are also exposed to the Game API, however, their names are based on the application runtime, unless specified otherwise in the corresponding command:<br/></p>\r\n\r\nGame:AddBall(0, 0, 5, 0.5, \"BallName\");\r\n\r\n<p>Omitting the last parameter in this method will auto-generate a name of the object. The following is an example of an auto-generated name:<br/></p>\r\n\r\nBall12345\r\n\r\n<p>Each Lua object contains various methods as defined in their corresponding Unity scripts. For a full list of the members of all object types, refer to the relevant source code documentation. Remember that all public members of the following classes are accessible in the Game API.</p>\n<ul><li><strong>uLua.PaddleGame.Ball</strong></li><li><strong>uLua.PaddleGame.Brick</strong></li><li><strong>uLua.PaddleGame.Paddle</strong></li><li><strong>uLua.PaddleGame.Game</strong></li><li><strong>uLua.PaddleGame.Settings</strong></li><li><strong>uLua.PaddleGame.UIText</strong></li></ul>\n\r\n2.2. Events and Callback Functions\r\n<p>The following events are invoked during the game and may be handled in Lua:</p>\n<ul><li><strong>BoundaryHit:</strong> Invoked when a ball hits the bottom screen boundary.</li><li><strong>BrickDestroyed:</strong> Invoked when a brick is destroyed. Passes one argument, which is the brick object that was destroyed.</li><li><strong>BrickHit:</strong> Invoked when a brick is hit. Passes one argument, which is the brick object that was hit.</li><li><strong>SceneLoaded:</strong> Invoked when the scene is loaded.</li><li><strong>UIUpdate:</strong> Invoked when the game level, player lives, or player score are altered.</li></ul>\n<p>The following object callback functions are invoked during the game and may be handled in Lua:</p>\n<ul><li><strong>Ball:OnHit():</strong> Called when a ball hits an object. To handle in the API, the ball name must be known.</li><li><strong>Brick:OnHit():</strong> Called when a brick hits an object. To handle in the API, the brick name must be known.</li><li><strong>Paddle:OnHit(): </strong>Called when a paddle hits an object. To handle in the API, the paddle name must be known.</li></ul>\n\n<p><strong><em>PaddleGame.lua</em></strong></p>\r\n\r\n--[[ June 2022                                                                                                             ]]\r\n--[[ This Lua script implements a large portion of the gameplay in this simple Paddle-style game.                        ]]\r\n--[[ It is meant to demonstrate the flexibility of the uLua API framework as a modding tool.                            ]]\r\nmath.randomseed(os.time());                    -- Used to generate random seed.\r\nlocal BrickColors = {                        -- Brick color table. Used to color blocks by different health values.\r\n    {1.0, 0.0, 0.0},                         -- (1) Red\r\n    {1.0, 0.5, 0.0},                         -- (2) Orange\r\n    {1.0, 1.0, 0.0},                         -- (3) Yellow\r\n    {0.5, 1.0, 0.0},                        -- (4) Lawn Green\r\n    {0.0, 1.0, 0.0},                        -- (5) Green\r\n    {0.0, 1.0, 0.5},                         -- (6) Spring Green\r\n    {0.0, 1.0, 1.0},                         -- (7) Aqua\r\n    {0.0, 0.5, 1.0},                         -- (8) Dodger Blue\r\n    {0.0, 0.0, 1.0},                         -- (9) Blue\r\n    {1.0, 0.0, 1.0},                         -- (10) Magenta\r\n}\r\n--[[ Methods                                                                                                             ]]\r\n--[[ The following methods are fully implemented in Lua and have no equivalent in Unity.                                 ]]\r\n--[[ They are defined as members of the 'Settings' and 'Game' objects for decorative purposes.                            ]]\r\n-- Used to increment the game level after clearing the scene. This function ends by starting a new level.\r\n-- For each level increment, the game is sped up. Even levels award a bonus life.\r\nfunction Game:OnLevelFinished()\r\n    -- Increment level\r\n    if (Settings.Level%2 == 0) then Settings:AddLife(); end -- Add life only on even levels.\r\n    Settings:AddLevel();\r\n    \r\n    -- Speed Up Game\r\n    if (Settings.Level &lt;= Settings.MaximumLevel) then \r\n        Game:SpeedUp();\r\n    else\r\n        Settings.Level = Settings.MaximumLevel;\r\n    end\r\n    -- Start new level\r\n    self:Start();\r\nend\r\n-- Used to reset the game state when all lives are lost.\r\nfunction Settings:Reset()\r\n    Game:SlowDown();\r\n    \r\n    self.Level = 1;                         -- Used to keep track of the current level.\r\n    self.Lives = 3;                            -- Used to keep track of remaining lives.\r\n    self.Score = 0;                            -- Used to keep track of player score.\r\n    self.MaximumLevel = 10;                    -- Used to indicate the maximum game level.\r\n    self.Delay = 0.5;                        -- Delay before the ball is set in motion (in seconds).\r\n    \r\n    self.SpeedIncrement = 0.125;            -- Ball/Paddle speed increment per level.\r\n    self.ColorMultiplier = 0.75;            -- Multiplier to adjust the brick color intensity.\r\n    \r\n    Game:OnUIUpdate();                        -- Force UI Update.\r\nend\r\n-- Used to generate a random arrangement of bricks.\r\n-- The health for each brick is assigned randomly to a value between 1 and the current level.\r\n-- The color for each brick is assigned based on its Health and by using the BrickColors table.\r\nfunction Game:Start()\r\n    -- Clear up scene\r\n    self:Clear();\r\n    \r\n    -- Set up Paddle and Ball\r\n    local SpeedIncrement = Settings.TotalSpeedIncrement;\r\n    self:AddBall(0, -1.75, 4+SpeedIncrement, Settings.Delay);\r\n    self:AddPaddle(0, -2.25, 6+SpeedIncrement, SpeedIncrement+1);\r\n    \r\n    -- Generate random level    \r\n    local Columns = math.random(Settings.Level/2+1, Settings.Level+2);\r\n    local Rows = Settings.Level+2;\r\n    \r\n    for j=Rows/2-1,-Rows/2+1,-1 do\r\n        local Increment = 1;\r\n        Columns = Columns -1;\r\n        if (Columns &lt; 1) then Increment = -1; end\r\n        for i=-Columns/2,Columns/2,Increment do\r\n            local Health = math.random(1, Settings.Level/2+j);\r\n            if (Health &lt; 1) then Health = 1; elseif (Health &gt; 10) then Health = 10; end\r\n            local Brick = Game:AddBrick(i*0.6125, j*0.33+1.0, Health);\r\n            Brick.Color = Color.__new(BrickColors[Health][1]*Settings.ColorMultiplier, BrickColors[Health][2]*Settings.ColorMultiplier, BrickColors[Health][3]*Settings.ColorMultiplier);\r\n        end\r\n    end\r\nend\r\n--[[ Event Handlers                                                                                                     ]]\r\n--[[ The following event handlers are fully implemented in Lua. They are defined as members of the 'Game' object for     ]]\r\n--[[ decorative purposes. Events are registered within the Unity scene and then invoked in Unity when appropriate.         ]]\r\n-- Called when the ball hits the bottom boundary.\r\n-- Decreases lives by one and resets the game state when the last ball hits the bottom of the screen.\r\nfunction Game:OnBoundaryHit(Ball)\r\n    if (self.NumBalls &gt;= 2) then\r\n    -- Remove extra balls \r\n        self:RemoveBall(Ball);\r\n    else\r\n        Settings:AddLife(-1);\r\n        \r\n        -- Reset game state if all lives were used\r\n        if (Settings.Lives &lt; 0) then\r\n            self:OnSceneLoaded();\r\n        else\r\n        -- Reset Paddle/Ball positions\r\n            self:ResetPositions();\r\n        end\r\n    end\r\nend\r\n-- Called when a brick is destroyed. Chance to generate an extra ball.\r\n-- Removes brick from the scene and increments player score. Restarts level if all bricks are destroyed.\r\nfunction Game:OnBrickDestroyed(Brick)\r\n    -- Update score\r\n    Settings:AddScore(10*Settings.Level);\r\n    \r\n    -- Extra ball chance\r\n    local Chance = Brick.MaxHealth/Settings.MaximumLevel;\r\n    \r\n    local Roll = math.random(0, 100);\r\n    if (Roll/100 &lt;= Chance) then\r\n        self:AddBall(0, -1.75, 4+Settings.TotalSpeedIncrement, Settings.Delay);\r\n    end\r\n    -- Remove Brick\r\n    self:RemoveBrick(Brick);\r\n    \r\n    -- Check if the level is finished\r\n    if (self.NumBricks == 0) then\r\n        self:OnLevelFinished();\r\n    end\r\nend\r\n-- Called when a brick is hit.\r\n-- Damages the block and updates its color. Also increments player score.\r\nfunction Game:OnBrickHit(Brick)\r\n    -- Update score\r\n    Settings:AddScore(10*Settings.Level);\r\n    -- Change brick color\r\n    local Health = Brick.Health-1;\r\n    if (Health &gt; 0) then \r\n        Brick.Color = Color.__new(BrickColors[Health][1]*Settings.ColorMultiplier, BrickColors[Health][2]*Settings.ColorMultiplier, BrickColors[Health][3]*Settings.ColorMultiplier);\r\n    end\r\n    Brick:Damage(1);\r\nend\r\n-- Resets settings and starts the game.\r\nfunction Game:OnSceneLoaded()\r\n    Settings:Reset();\r\n    self:Start();\r\nend\r\n-- Updates all UIText objects.\r\nfunction Game:OnUIUpdate()\r\n    LevelText.Message = \"LEVEL: \" .. Settings.Level;\r\n    LivesText.Message = \"LIVES: \" .. Settings.Lives;\r\n    ScoreText.Message = \"SCORE: \" .. Settings.Score;\r\nend\r\n-- The following commands register event handlers for different events invoked within Unity.\r\nRegisterEventHandler(\"BoundaryHit\", \"OnBoundaryHit\", Game);            -- Callback for BoundaryHit event.\r\nRegisterEventHandler(\"BrickDestroyed\", \"OnBrickDestroyed\", Game);    -- Callback for BrickDestroyed event.\r\nRegisterEventHandler(\"BrickHit\", \"OnBrickHit\", Game);                -- Callback for BrickHit event.\r\nRegisterEventHandler(\"SceneLoaded\", \"OnSceneLoaded\", Game);            -- Callback for SceneLoad event.\r\nRegisterEventHandler(\"UIUpdate\", \"OnUIUpdate\", Game);                -- Callback for UIUpdate event.", "metacritic": null, "released": "2022-07-13", "tba": false, "updated": "2022-07-15T09:40:03", "background_image": "https://media.rawg.io/media/screenshots/18e/18e025435e0c36149853446c82104b31.jpg", "website": "", "rating": 0.0, "rating_top": 0, "added_by_status": null, "playtime": 0, "achievements_count": 0, "ratings_count": 0, "suggestions_count": 16, "game_series_count": 0, "reviews_count": 0, "platforms": ["Android", "Linux", "PC"], "developers": ["Fedow"], "genres": [], "publishers": [], "esrb_rating": null}