{"id": 584381, "slug": "mimizuku-saga-10", "name": "Mimizuku Saga 10", "name_original": "Mimizuku Saga 10", "description": "<p>This is my first ever 10-liner written in BASIC for Commodore 64 and the second game released in BASIC. When I was much younger, I used to write in BASIC a lot, but\u00a0after several years spent in 6502 assembly - with the 10-liners challenge given -\u00a0 it was still a lot of stuff I needed to learn, the \"nasty\" stuff!</p>\n<p>This game has been submitted to the Basic 10liner Contest 2021 in PUR-80 category. Code doesn't use any command abbreviations, just simply the maximum of 80 characters per line.</p>\n<p>Inspired by another game from this competition, an amazing, jaw-dropping 10 lines long Sokoban written by Johan Berntsson. Although I started with a space theme,\u00a0aliens, access keys, bombs and chambers (SPACE10 was the WIP title), somehow I ended up with a Japanese theme, so thanks for many conscious and unconscious\u00a0influences from Sokoban!</p>\n<p>Challenge was great, and I had no idea so much can fit in 10 lines! But there were several refactors, shuffles of code, using math instead of conditions, and some tricks used\u00a0in order to push more into it. That was real fun! And took me at least ~30 working hours with testing to achieve this result.</p>\n\r\nPlot\r\n<p>This is an old Japanese legend, which doesn't exist, but perhaps it could as some legends are still alive and some of them were forgotten thousands of years ago.\u00a0Your dead ancestors brought you to Yomi, the realm of the dead, as they wished to get back to life. But you know that this could only make Izanami, a gatekeeper of this dead\u00a0realm angry. You've taken the shape of an eared owl - mimizuku, and sneaked into the realm with an idea to greet your ancestors and fill their hearts with sake, so they will regain\u00a0the equilibrium.</p>\n<p>To succeed, you have to greet 25 ancestors on your path and remain alive so you can get back from there. This is a hard task to complete, as with each step,\u00a0your life force weakens. Also, greeting your ancestors has a price: it drains your life force as well. You can collect sake bottles which will help you deal with your ancestors,\u00a0so when you're greeting them, they will get some sips of sake first, and only if you don't have any sake left, your life force will be drained.</p>\n<p>You are progressing down the realm of the dead by entering gates spread over the area. But if your destiny was to fail, you won't find any further gates and stay there forever.</p>\n<p>But stay brave on your quest. Thus this legend wouldn't exist if not for the one who got back from the realm of the dead and passed it along.</p>\n\r\nScreen\r\n<p>Starting from the top-left of the screen, you see:</p>\n<ul><li>a number of your ancestors left you have to greet on your path</li><li>life energy remaining</li><li>sips of sake, each bottle contains 7 samurai-sized sips of sake</li><li>on greeting your ancestors, drain points are displayed, if you don't have any sips of sake left, this amount of points will be drained from your life force</li></ul>\n<p>Action screen contains:</p>\n<ul><li>your owl character starting always from the top-left part of the screen</li><li>white walls you cannot pass through</li><li>purple skulls of your ancestors</li><li>blue bottles of sake</li><li>brown gates to different parts of the realm of the dead</li></ul>\n\n\r\nControls\r\n<p>Use WASD keys on the keyboard to control your owl character in four directions. To greet your ancestors or collect bottles of sake or go through gates simply move there.</p>\n<p>When the game is finished, you can play it again just by typing:</p>\n<p> RUN:</p>\n<p><em>* note the colon character at the end which separates command from the characters following it</em></p>\n<p>To restart the game, just use RUN STOP key to halt the program execution and run the game again.</p>\n<p>The game was tested on real hardware and using WinVice 2.4 emulator.</p>\n\r\nCode description\r\n<p>Level generation is slow as I squeezed the logic from 3 lines of code down to 2 lines. Because of that,\u00a0I needed to exchange IF conditions to mathematical equations which have to be executed and nullified when not needed.\u00a0For this reason, if you play this game on the emulator (e.g. WinVice), it's much more enjoyable in warp mode.</p>\n<p>The generator will output a different level on each run, but there are several patterns used in order to make this game playable.</p>\n<p>First of all, there are several vertical walls drawn using modulo of 3. Vertically, 3 rows are also used to draw special tiles\u00a0(bottles of sake, ancestors, and gates). I have found a way of making the math working so a player would never be stuck due\u00a0to three tiles in a column being a wall. At the same time, I was able to keep some variety and uniqueness in the design of each level.</p>\n<p>However, I had no more space to write a logic that guarantees that there is a single gate leading to the next screen. In such a rare case,\u00a0a game cannot be completed. Anyway, I've found it to be an interesting concept of destiny, which sometimes will lead you to a failure of your quest.</p>\n<p>This code was changed several times in order to fit all parts of the math equations in two lines, and still squeeze assigning of `D$`\u00a0somewhere in this free area!</p>\n\r\nLine by line code overview\r\n<p>\n</p>\n<ul><li>\u00a0Line 0: Initialization of constants and variables, allocation of tiles table (`V`), data for life force points, number of ancestors, screen colour location</li><li>Line 1: Level generation (called each time when entering a gate), `Q` contains a part of the equation responsible to display all other tiles than walls, assigning \"D\" to `D$` used for controls</li><li>Line 2: The second line of level generation, random special tile is generated even though it might be not used but thanks to that a generator fits in two lines, calling tile rendering,\u00a0\u00a0closing a FOR loop at the end followed by setting up `X` and `Y` to be used by a player character</li><li>Line 3: The main loop starts here, keyboard controls first, getting a tile under which player wants to move, at the end defining title of the game in data</li><li>Line 4: Displaying top bar with all details like life force and information of how much of energy an ancestor drained, at the end a simple logic to finish the game when succeeded or failed\u00a0with a different message</li><li>Line 5: Drawing player character on the screen, then a case of stepping on a sake bottle followed by a case of moving to a field with an ancestor. In other cases, moving back to the start\u00a0of the main loop (line 3). At the end, some data with a value used for level generation followed by a common part of the game-ending message</li><li>Line 6: Clearing the character from the old tile, setting new `X` and `Y` positions, decreasing a life force by one, if a tile is different than a gate: moving back to the start of the main loop (line 3),\u00a0otherwise clearing the screen and jumping back to the level generation (line 1)</li><li>Line 7: Getting a bottle of sake, jumping to line 6 to redraw player character on a new position. At the end just data string containing the message with two game ending variants followed by\u00a0all tiles available in the game</li><li>Line 8: Greeting an ancestor, generating a random number of points to be drained and the logic to remove them from life force and collected sips of sake, jumping to line 6 to redraw player\u00a0on a new position</li><li>Line 9: Setting a tile in the tiles table, rendering a tile on the screen under a given position using `SYS 58640` ($E510) or STUPT, a KERNAL procedure to set a cursor position, tile is selected\u00a0using a string offset</li></ul>\n\r\nVariables overview and some tricks used\r\n<ul><li>L - life force value</li><li>M - number of ancestors to be greeted</li><li>P - screen border and foreground colour</li><li>T$ - the title of the game stored in a string together with clearing of the screen</li><li>U -\u00a0 a value of 10 assigned, used in the level generation code so setting values for `X` and `Y` could fit (variable takes one character)</li><li>E$ - the first part of the screen displayed on the end of the game (when succeeding or failing)</li><li>S$ - a string containing the \"DRAIN:\" string</li><li>A$ - a concatenation of two things as this way everything fits in the game: first of all the rest of the message when a player will win or fail, followed by all tiles</li><li>X, Y - tile positions `X` and `Y` on the screen</li><li>V(X,Y) - two-dimensional table with all tiles</li><li>D$ - used to store \"D\" character, otherwise, the title of the game wouldn't have a space character</li><li>K - sips of sake (in BASIC it doesn't need to be defined and it will be zero by default)</li></ul>\n<p>And a few other math tricks like merging some conditioning in line 4, e.g. using `L*M&lt;0` instead of two separate conditions, and offsetting a string a similar way.</p>\n<p>I did something similar in line 8 in order to decrease the life force. Some sips of sake are taken by the ancestor, but when a drain is higher, it needs to be taken not only\u00a0from the sake counter (`K`) but also from the life force (`L`). Using conditions could be easier, but it was great to find such a simple alternative!</p>\n<p>Also, just have a look at setting D$ in line 1. I had no idea I do not have to close double quotes when assigning some string variables. Well, I think I did something like that when I was young...</p>\n<p>Anyway, limitations pushed me into these experimentations with surprising results!</p>\n<p>In the last line, I re-used assigning tiles to a two-dimensional table (`V`) between level generation and when a player moves in the game. It was needed due to lack\u00a0of space, but as several things are manipulated this refactor was an eye-opener. It forced me to call line 9 twice for both states in order to render a tile properly and\u00a0take an object only once. I was also forced to re-use the same variables for `X` and `Y`, something I would never do in the \"normal\" code, but I really liked the simplicity I got from\u00a0all of that. Code-wise though it's not easy to follow though!</p>\n\r\nNotes\r\n<p>This game was submitted to the competition at\u00a023 February 2021. You can find the game entry here:\u00a0https://bunsen.itch.io/mimizuku-saga-10-by-bago-zonde</p>", "metacritic": null, "released": "2021-04-05", "tba": false, "updated": "2021-04-13T03:56:41", "background_image": "https://media.rawg.io/media/screenshots/302/30282443fa0449c3502e20f0bc3bd124.jpg", "website": "", "rating": 0.0, "rating_top": 0, "added_by_status": null, "playtime": 0, "achievements_count": 0, "ratings_count": 0, "suggestions_count": 57, "game_series_count": 0, "reviews_count": 0, "platforms": ["Web"], "developers": ["Commocore"], "genres": ["Puzzle"], "publishers": [], "esrb_rating": null}